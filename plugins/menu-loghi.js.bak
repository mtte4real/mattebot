import os from 'os';
import util from 'util';
import humanReadable from 'human-readable';
import { default as makeWASocket } from '@whiskeysockets/baileys';
import { promises as fs } from 'fs';
import { performance } from 'perf_hooks';

let handler = async (m, { conn, usedPrefix }) => {
  const {
    antiToxic,
    antilinkhard,
    antiPrivate,
    antitraba,
    antiArab,
    antiviewonce,
    isBanned,
    welcome,
    detect,
    antiLink,
    sologruppo,
    soloprivato,
    antiCall,
    modoadmin,
    antiPorno,
    jadibot,
    gpt
  } = global.db.data.chats[m.chat] || {};

  const botName = global.db.data.nomedelbot || "á´¼Ê³â±áµâ±â¿ á´®áµ’áµ—âœ¦";

  const status = (bool) => bool ? 'âœ…' : 'âŒ';

  const list = `
â•­â”â”â”â° *ğŒğğ§ğ® ğ…ğ®ğ§ğ³ğ¢ğ¨ğ§ğ¢* â±â”â”â”â¬£
â”ƒ âœ¦ ğ‘ğğ ğ¨ğ¥ğšğ«ğ¢:
â”ƒ   ${status(detect)} ğğğ­ğğœğ­
â”ƒ   ${status(gpt)} ğ ğ©ğ­
â”ƒ   ${status(jadibot)} ğ£ğšğğ¢ğ›ğ¨ğ­
â”ƒ   ${status(welcome)} ğ›ğğ§ğ¯ğğ§ğ®ğ­ğ¨
â”ƒ   ${status(sologruppo)} ğ¬ğ¨ğ¥ğ¨ğ ğ«ğ®ğ©ğ©ğ¨
â”ƒ   ${status(soloprivato)} ğ¬ğ¨ğ¥ğ¨ğ©ğ«ğ¢ğ¯ğšğ­ğ¨
â”ƒ
â”ƒ âœ¦ ğ€ğ§ğ­ğ¢-ğ…ğ®ğ§ğ³ğ¢ğ¨ğ§ğ¢:
â”ƒ   ${status(modoadmin)} ğ¦ğ¨ğğ¨ ğšğğ¦ğ¢ğ§
â”ƒ   ${status(isBanned)} ğ›ğšğ§ğ ğ«ğ®ğ©ğ©ğ¨
â”ƒ   ${status(antiPorno)} ğšğ§ğ­ğ¢ğ©ğ¨ğ«ğ§ğ¨
â”ƒ   ${status(antiCall)} ğšğ§ğ­ğ¢ğœğšğ¥ğ¥
â”ƒ   ${status(antiLink)} ğšğ§ğ­ğ¢ğ¥ğ¢ğ§ğ¤
â”ƒ   ${status(antiToxic)} ğšğ§ğ­ğ¢ğ­ğ¨ğ±ğ¢ğœ
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£

ğŸ’¡ *ğˆğ§ğŸğ¨ ğ¬ğ­ğšğ­ğ®ğ¬:*
- âœ… Â» *ğ€ğ­ğ­ğ¢ğ¯ğšğ­ğ¨*
- âŒ Â» *ğƒğ¢ğ¬ğšğ­ğ­ğ¢ğ¯ğšğ­ğ¨*

ğŸ’¬ *ğ‚ğ¨ğ¦ğšğ§ğğ¢ ğ”ğ­ğ¢ğ¥ğ¢:*
Â» ${usedPrefix}attiva <funzione>
Â» ${usedPrefix}disabilita <funzione>
Â» ${usedPrefix}infostato
`.trim();

  await conn.sendMessage(m.chat, {
    text: list,
    contextInfo: {
      externalAdReply: {
        title: "á´¼Ê³â±áµâ±â¿ á´®áµ’áµ—âœ¦ - ğŒğ„ğğ” ğ…ğ”ğğ™ğˆğğğˆ",
        body: "ğğ˜ ğ˜ğğ”ğğ’ - ğ“ğ‡ğ„ ğ‹ğ„ğ†ğ„ğğƒ",
        thumbnail: await fs.readFile('./storage/image/origin.jpg'), // Carica l'immagine di anteprima
        mediaType: 1,
        showAdAttribution: true,
        renderLargerThumbnail: true,
      },
      forwardingScore: 1,
      isForwarded: true,
      forwardedNewsletterMessageInfo: {
        newsletterJid: '120363370244642449@newsletter',
        serverMessageId: '',
        newsletterName: botName
      }
    }
  }, { quoted: m });
};

handler.help = ['funzioni'];
handler.tags = ['menu'];
handler.command = /^(funzioni)$/i;

export default handler;
